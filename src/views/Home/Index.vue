<template>
  <div class="app-home">
    <div class="home-3edeff15047c21ac6441301927306137">
      <van-sticky
        :offset-top="$appIsApple && $appConfigInfo.appInfo.pwa == 1 ? 50 : 0"
      >
        <van-search
          show-action
          shape="round"
          :placeholder="appInfo.search.placeholder"
          @click="$appPush({ path: '/search' })"
        >
          <template #action>
            <img
              width="35"
              height="35"
              v-lazy="appInfo.search.img"
              class="app-3b9655ab218c7f1a18f5dacd778a52f0"
              @click="
                appInfo.search.to
                  ? $appOpenUrl(
                      'ÊòØÂê¶ÊâìÂºÄÂÜÖÈÉ®ÈìæÊé•?',
                      'ÁΩëÁªú‰∫§ÂèãÈúÄË∞®ÊÖé,Ê∂âÂèäÈáëÈí±Ëé´ËΩª‰ø°',
                      { path: appInfo.search.to },
                      1
                    )
                  : $appOpenUrl(
                      'ÊòØÂê¶ÊâìÂºÄÂ§ñÈÉ®ÈìæÊé•?',
                      null,
                      { path: appInfo.search.url },
                      0
                    )
              "
            />
          </template>
        </van-search>
      </van-sticky>
    </div>

    <div class="app-6db4dcff371b9397d894ed932d085444">
      <van-tabs
        v-model="tabsInfo.model"
        v-if="tabsInfo.model > -1"
        :border="false"
        :ellipsis="false"
        :swipeable="true"
        @change="$appPush({ query: { type: tabsInfo.model } })"
        duration="0.5"
        line-width="25px"
        class="home-5db8dca30c2d7f0c2bc225ae852c5053"
      >
        <van-tab title="Êé®Ëçê" class="home-e7f8cbd87d347be881cba92dad128518">
          <TuiJian />
        </van-tab>
        <van-tab title="Ëµõ‰∫ã" class="home-e7f8cbd87d347be881cba92dad128518">
          <Game />
        </van-tab>
        <van-tab
          to="/search?q=%E7%88%86%E6%96%99&refresh=1"
          title="ÁàÜÊñô üîó"
          class="home-e7f8cbd87d347be881cba92dad128518"
        >
          <div style="margin-top: 25px">Êï∞ÊçÆÊù•Ê∫ê‰∫íËÅîÁΩë</div>
        </van-tab>
      </van-tabs>
    </div>

    <div class="home-72ab9e07378f988922e6c91884048db0">
      <span class="home-865fc5de432c76bc2ab45afb9ff5b8de"
        >Êï∞ÊçÆÈöèÊÑèÂºïÁî®ÔºåÊ≥®ÊòéÂá∫Â§ÑÂç≥ÂèØ ;D</span
      >
    </div>

    <AppHello height="100px" />
  </div>
</template>

<script>
export default {
  name: "AppHome",
  components: {
    TuiJian: () => import("@/views/Home/TuiJian.vue"),
    Game: () => import("@/views/Home/Game.vue"),
    AppHello: () => import("@/components/App/Hello.vue"),
  },
  metaInfo() {
    return {
      meta: [
        {
          vmid: "keyWords",
          name: "keyWords",
          content:
            "ban,BPÊ®°Êãü,Êö¥Ëµ∞ÁöÑËÄÅÂàòÂ§á,Ê¶úÂçï,ÊØîËµõ,ÁâàÊú¨‰πãÂ≠ê,Á≠ñÂàí,ÂØπÂ±ÄÂõûÈ°æ,ÂØπÊâã,ÂØπÊäó,ÂØπÊØî,ÊâìÈáé,ÈòüÂèã,È°∂Á´Ø,ÂàÜË∑Ø,ÂèëËÇ≤,ËæÖÂä©,ÈùûbanÂøÖÈÄâ,ËøîÂú∫,ÂÖ≥Á≥ª,ÂõΩÊúç,È´òÂàÜÂ±Ä,ÊîªÈÄüÈòàÂÄº,ËßÇËµõÂä©Êâã,ÈªÑÂàÄ,ÊïôÁªÉ,ÈáëÂàÄ,‰∫§Âèã,Â∞ñÁ´ØÂ±Ä,KPL,ÂÖãÂà∂,ÂºÄÈªë,Êâ©Âàó,ËÄÅÂàòÂ§á,Ë∑Ø‰∫∫Â±Ä,Ê®°ÊãüÂô®,Èó∑Â£∞ÂèëË¥¢,opgg,pick,Êéí‰Ωç,ÁöÆËÇ§,ÂÖ®Â±ÄBP,ÂÖ®Â±ÄBPÊ®°ÊãüÂô®,Âº∫Âäø,Âº±Âäø,‰∏äÂàÜÂä©Êâã,Êï∞ÊçÆ,Ëµõ‰∫ã,ÂêåÂàÜË∑Ø,ÂêåËÅå‰∏ö,Êé®Ëçê,‰ΩìÈ™å,‰∏áÊàò,ÁéãËÄÖËç£ËÄÄ,ÁéãËÄÖËê•Âú∞,Áé©ÂÆ∂,Ëã±ÈõÑ,Ê∞∏Â§ú,‰∏≠Ë∑Ø,‰∏ªÊí≠,ÊàòÂäõ,Ê≠£Âºè,ËÅå‰∏ö",
        },
        {
          vmid: "description",
          name: "description",
          content:
            "Âú®Ëøô,ÂèØ‰ª•ÊâæÂà∞Ëá™Â∑±ÂøÉ‰ª™ÁöÑËã±ÈõÑ„ÄÇÂú®Ëøô,ÂèØ‰ª•ÁúãÂà∞ÊØè‰∏™Ëã±ÈõÑÁöÑÂ∑ÖÂ≥∞Êó∂Âàª„ÄÇÂú®Ëøô,ËøòÂèØ‰ª•Ê®°ÊãüÂÖ®Â±ÄBPÔºÅ",
        },
      ],
    };
  },
  data() {
    return {
      copyData: "",
      appInfo: {
        search: {
          placeholder: "ÊêúÁ¥¢",
          img: "//pic.iask.cn/fimg/724763542645.jpg",
          to: "/friends",
          url: null,
        },
      },
      tabsInfo: {
        model: 0,
      },
    };
  },
  mounted() {
    this.initPage();
  },
  methods: {
    initPage: function () {
      let pwa = parseInt(this.$route.query.pwa) || 0,
        type = parseInt(this.$route.query.type) || 0,
        version = parseInt(this.$route.query.v) || 1609430400;

      this.tabsInfo.model = type;

      if (this.$appConfigInfo.appInfo.version > 0) {
        this.appInfo = this.$appConfigInfo.appInfo;
      }

      if (pwa == 0) return;
      this.$appConfigInfo.appInfo.pwa = pwa;

      this.$appSetLocalStorage("appConfigInfo", this.$appConfigInfo);

      let updateDay = ((this.$appTs - version) / 86400).toFixed(2);

      if (updateDay >= 90) {
        this.$dialog
          .confirm({
            title: "Ê∏©È¶®ÊèêÁ§∫„Äê" + updateDay + "„Äë",
            message:
              "ÊÇ®Â∑≤ÁªèÂæà‰πÖÊ≤°ÊúâÊõ¥Êñ∞ËøáÊú¨Á´ôÂï¶\rÈ°µÈù¢ÊúâÂèØËÉΩÂèëÁîü‰∫ÜËæÉÂ§ßÁöÑÂèòÂåñ\rÂª∫ËÆÆÊ∏ÖÈô§ÁºìÂ≠òÈáçÊñ∞Ê∑ªÂä†Âà∞Ê°åÈù¢",
          })
          .then(() => {
            // on confirm
            this.copyData = location.origin;

            setTimeout(
              (copyData) => {
                this.$appCopyData(
                  copyData,
                  "ÈìæÊé•Â∑≤Â§çÂà∂,ËØ∑Ê∏ÖÈô§ÁºìÂ≠òÈáçÊñ∞Ê∑ªÂä†Âà∞Ê°åÈù¢~"
                );
              },
              750,
              this.copyData
            );
          })
          .catch(() => {
            // on cancel
          });
      }
    },
  },
};
</script>

<style lang="less">
.update-tyf {
  color: purple;
}

.update-zsf {
  color: rgb(222, 177, 81);
}

.update-xyx {
  color: rgb(35, 124, 123);
}

.update-pb {
  color: black;
}

.update-cz {
  color: red;
}

.update-fx {
  color: orange;
}

.update-xpf {
  color: green;
}

.update-fc {
  color: blue;
}

img.home-3c873293a7dc1ea8c20579f6a7ae94a9 {
  border-radius: unset;
  height: 100%;
  width: 100%;
}

div.home-f55b83381f479ed4c1203b80f891d83a {
  font-size: @app-font-size + 2px;
  margin-top: 5px;
}

div.home-72ab9e07378f988922e6c91884048db0 {
  font-size: @app-font-size + 2px;
  margin: 25px;
}

div.game-11919d5ca20d292c64673bc807d852e2.van-cell-group,
div.game-ed4838a6d4554b1829c7f86a58e3f20f.van-cell {
  background-color: transparent !important;
}

div.game-987e845860b29a0bb6ca902ba902b4f2 {
  div.van-grid-item__content {
    background-color: transparent !important;
  }
}

div.home-5db8dca30c2d7f0c2bc225ae852c5053 {
  div.van-tabs__wrap {
    width: 35% !important;
    margin-top: -3px;
  }

  div.van-tab--active {
    font-size: 25px;
  }
}

div.home-3edeff15047c21ac6441301927306137 {
  div.van-search {
    width: 65%;
    right: 0;
    position: absolute;
    margin-top: 3px;
    z-index: 1;
  }
}
</style>